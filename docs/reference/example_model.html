<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Example model — example_model • rstap</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Example model — example_model" />
<meta property="og:description" content="A model for use in rstap examples." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rstap</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction.html">STAP Introduction</a>
    </li>
    <li>
      <a href="../articles/stap_dnd_lmer.html">Causal STAP Models</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Example model</h1>
    
    <div class="hidden name"><code>example_model.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A model for use in <span class="pkg">rstap</span> examples.</p>
    </div>



    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>Calling <code><a href='https://rdrr.io/r/utils/example.html'>example("example_model")</a></code> will run the model in the 
  Examples section, below, and the resulting stapreg object will then be
  available in the global environment. The <code>chains</code> and <code>iter</code>
  arguments are specified to make this example small in size. In practice,
  we recommend that they be left unspecified in order to use the default
  values (4 and 2000 respectively) or increased if there are convergence
  problems. The <code>cores</code> argument is optional and on a multicore system,
  the user may well want to set that equal to the number of chains being
  executed.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>The Longituinal <a href='https://biostatistics4socialimpact.github.io/rstap/articles/longitudinal-I.html'>Vignette</a> for <code>stap_glmer</code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'> <span class='co'>## following lines make example run faster</span>
<span class='no'>distdata</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span>(<span class='no'>homog_longitudinal_bef_data</span>[,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"subj_ID"</span>,<span class='st'>"measure_ID"</span>,<span class='st'>"class"</span>,<span class='st'>"dist"</span>)],
                   <span class='no'>subj_ID</span><span class='kw'>&lt;=</span><span class='fl'>10</span>)
<span class='no'>timedata</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span>(<span class='no'>homog_longitudinal_bef_data</span>[,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"subj_ID"</span>,<span class='st'>"measure_ID"</span>,<span class='st'>"class"</span>,<span class='st'>"time"</span>)],
                   <span class='no'>subj_ID</span><span class='kw'>&lt;=</span><span class='fl'>10</span>)
<span class='no'>timedata</span>$<span class='no'>time</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span>(<span class='no'>timedata</span>$<span class='no'>time</span>)
<span class='no'>subjdata</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span>(<span class='no'>homog_longitudinal_subject_data</span>,<span class='no'>subj_ID</span><span class='kw'>&lt;=</span><span class='fl'>10</span>)
<span class='no'>example_model</span> <span class='kw'>&lt;-</span>
  <span class='fu'><a href='stap_glmer.html'>stap_glmer</a></span>(<span class='no'>y_bern</span> ~ <span class='no'>centered_income</span> +  <span class='no'>sex</span> + <span class='no'>centered_age</span> + <span class='fu'>stap</span>(<span class='no'>Coffee_Shop</span>) + (<span class='fl'>1</span><span class='kw'>|</span><span class='no'>subj_ID</span>),
             <span class='kw'>family</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/family.html'>gaussian</a></span>(),
             <span class='kw'>subject_data</span> <span class='kw'>=</span> <span class='no'>subjdata</span>,
             <span class='kw'>distance_data</span> <span class='kw'>=</span> <span class='no'>distdata</span>,
             <span class='kw'>time_data</span> <span class='kw'>=</span> <span class='no'>timedata</span>,
             <span class='kw'>subject_ID</span> <span class='kw'>=</span> <span class='st'>'subj_ID'</span>,
             <span class='kw'>group_ID</span> <span class='kw'>=</span> <span class='st'>'measure_ID'</span>,
             <span class='kw'>prior_intercept</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>normal</a></span>(<span class='kw'>location</span> <span class='kw'>=</span> <span class='fl'>25</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>autoscale</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>),
             <span class='kw'>prior</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>normal</a></span>(<span class='kw'>location</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>autoscale</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>),
             <span class='kw'>prior_stap</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>normal</a></span>(<span class='kw'>location</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fl'>4</span>),
             <span class='kw'>prior_theta</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>Coffee_Shop</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>spatial</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>log_normal</a></span>(<span class='kw'>location</span> <span class='kw'>=</span> <span class='fl'>1</span>,
                                                                             <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fl'>1</span>),
                                                         <span class='kw'>temporal</span> <span class='kw'>=</span> <span class='fu'><a href='priors.html'>log_normal</a></span>(<span class='kw'>location</span> <span class='kw'>=</span> <span class='fl'>1</span>,
                                                                               <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fl'>1</span>))),
             <span class='kw'>max_distance</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>max_time</span> <span class='kw'>=</span> <span class='fl'>50</span>,
             <span class='co'># chains, cores, and iter set to make the example small and fast</span>
             <span class='kw'>chains</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>iter</span> <span class='kw'>=</span> <span class='fl'>25</span>, <span class='kw'>cores</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'stap_continuous' NOW (CHAIN 1).
#&gt; Chain 1: 
#&gt; Chain 1: Gradient evaluation took 0.000173 seconds
#&gt; Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 1.73 seconds.
#&gt; Chain 1: Adjust your expectations accordingly!
#&gt; Chain 1: 
#&gt; Chain 1: 
#&gt; Chain 1: WARNING: No variance estimation is
#&gt; Chain 1:          performed for num_warmup &lt; 20
#&gt; Chain 1: 
#&gt; Chain 1: Iteration:  1 / 25 [  4%]  (Warmup)
#&gt; Chain 1: Iteration:  2 / 25 [  8%]  (Warmup)
#&gt; Chain 1: Iteration:  4 / 25 [ 16%]  (Warmup)
#&gt; Chain 1: Iteration:  6 / 25 [ 24%]  (Warmup)
#&gt; Chain 1: Iteration:  8 / 25 [ 32%]  (Warmup)
#&gt; Chain 1: Iteration: 10 / 25 [ 40%]  (Warmup)
#&gt; Chain 1: Iteration: 12 / 25 [ 48%]  (Warmup)
#&gt; Chain 1: Iteration: 13 / 25 [ 52%]  (Sampling)
#&gt; Chain 1: Iteration: 14 / 25 [ 56%]  (Sampling)
#&gt; Chain 1: Iteration: 16 / 25 [ 64%]  (Sampling)
#&gt; Chain 1: Iteration: 18 / 25 [ 72%]  (Sampling)
#&gt; Chain 1: Iteration: 20 / 25 [ 80%]  (Sampling)
#&gt; Chain 1: Iteration: 22 / 25 [ 88%]  (Sampling)
#&gt; Chain 1: Iteration: 24 / 25 [ 96%]  (Sampling)
#&gt; Chain 1: Iteration: 25 / 25 [100%]  (Sampling)
#&gt; Chain 1: 
#&gt; Chain 1:  Elapsed Time: 0.010851 seconds (Warm-up)
#&gt; Chain 1:                0.938751 seconds (Sampling)
#&gt; Chain 1:                0.949602 seconds (Total)
#&gt; Chain 1: </div><div class='output co'>#&gt; <span class='warning'>Warning: There were 1 chains where the estimated Bayesian Fraction of Missing Information was low. See</span>
#&gt; <span class='warning'>http://mc-stan.org/misc/warnings.html#bfmi-low</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Examine the pairs() plot to diagnose sampling problems</span></div><div class='output co'>#&gt; <span class='warning'>Warning: The largest R-hat is 2.06, indicating chains have not mixed.</span>
#&gt; <span class='warning'>Running the chains for more iterations may help. See</span>
#&gt; <span class='warning'>http://mc-stan.org/misc/warnings.html#r-hat</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.</span>
#&gt; <span class='warning'>Running the chains for more iterations may help. See</span>
#&gt; <span class='warning'>http://mc-stan.org/misc/warnings.html#bulk-ess</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.</span>
#&gt; <span class='warning'>Running the chains for more iterations may help. See</span>
#&gt; <span class='warning'>http://mc-stan.org/misc/warnings.html#tail-ess</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Markov chains did not converge! Do not analyze results!</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#format">Format</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Adam Peterson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


