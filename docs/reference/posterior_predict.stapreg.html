<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Draw from posterior predictive distribution — posterior_predict.stapreg • rstap</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Draw from posterior predictive distribution — posterior_predict.stapreg" />

<meta property="og:description" content="The posterior predictive distribution is the distribution of the outcome
implied by the model after using the observed data to update our beliefs
about the unknown parameters in the model. Simulating data from the posterior
predictive distribution using the observed predictors is useful for checking
the fit of the model. Drawing from the posterior predictive distribution at
interesting values of the predictors also lets us visualize how a
manipulation of a predictor affects (a function of) the outcome(s). With new
observations of predictor variables we can use the posterior predictive
distribution to generate predicted outcomes." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rstap</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction.html">STAP Introduction</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Draw from posterior predictive distribution</h1>
    
    <div class="hidden name"><code>posterior_predict.stapreg.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>The posterior predictive distribution is the distribution of the outcome
implied by the model after using the observed data to update our beliefs
about the unknown parameters in the model. Simulating data from the posterior
predictive distribution using the observed predictors is useful for checking
the fit of the model. Drawing from the posterior predictive distribution at
interesting values of the predictors also lets us visualize how a
manipulation of a predictor affects (a function of) the outcome(s). With new
observations of predictor variables we can use the posterior predictive
distribution to generate predicted outcomes.</p>
    
    </div>

    <pre class="usage"><span class='co'># S3 method for stapreg</span>
<span class='fu'>posterior_predict</span>(<span class='no'>object</span>, <span class='kw'>newsubjdata</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>newdistdata</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>newtimedata</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>draws</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>subject_ID</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>group_ID</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re.form</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>offset</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A fitted model object returned by one of the 
<span class="pkg">rstap</span> modeling functions. See <code><a href='stapreg-objects.html'>stapreg-objects</a></code>.</p></td>
    </tr>
    <tr>
      <th>newsubjdata</th>
      <td><p>Optionally, a data frame of the subject-specific data
in which to look for variables with which to predict.
If omitted, the original datasets are used. If <code>newsubjdata</code>
is provided and any variables were transformed (e.g. rescaled) in the data
used to fit the model, then these variables must also be transformed in
<code>newsubjdata</code>. This only applies if variables were transformed before
passing the data to one of the modeling functions and <em>not</em> if
transformations were specified inside the model formula. Also see the Note
section below for a note about using the <code>newdata</code> argument with with
binomial models.</p></td>
    </tr>
    <tr>
      <th>newdistdata</th>
      <td><p>If newsubjdata is provided a data frame of the subject-distance
must also be given for models with a spatial component</p></td>
    </tr>
    <tr>
      <th>newtimedata</th>
      <td><p>If newsubjdata is provided, a data frame of the subject-time data
must also be given for models with a temporal component</p></td>
    </tr>
    <tr>
      <th>draws</th>
      <td><p>An integer indicating the number of draws to return. The default
and maximum number of draws is the size of the posterior sample.</p></td>
    </tr>
    <tr>
      <th>subject_ID</th>
      <td><p>name of column to join on between subject_data and bef_data</p></td>
    </tr>
    <tr>
      <th>group_ID</th>
      <td><p>name of column to join on between <code>subject_data</code> and bef_data that uniquely identifies the correlated groups (e.g. visits,schools). Currently only one group (e.g. a measurement ID) can be accounted for in a spatial temporal setting.</p></td>
    </tr>
    <tr>
      <th>re.form</th>
      <td><p>If <code>object</code> contains <code><a href='stap_glmer.html'>group-level</a></code>
parameters, a formula indicating which group-level parameters to
condition on when making predictions. <code>re.form</code> is specified in the
same form as for <code><a href='https://www.rdocumentation.org/packages/lme4/topics/predict.merMod'>predict.merMod</a></code>. The default,
<code>NULL</code>, indicates that all estimated group-level parameters are
conditioned on. To refrain from conditioning on any group-level parameters,
specify <code>NA</code> or <code>~0</code>. The <code>newdata</code> argument may include new
<em>levels</em> of the grouping factors that were specified when the model
was estimated, in which case the resulting posterior predictions
marginalize over the relevant variables.</p></td>
    </tr>
    <tr>
      <th>fun</th>
      <td><p>An optional function to apply to the results. <code>fun</code> is found
by a call to <code><a href='https://www.rdocumentation.org/packages/base/topics/match.fun'>match.fun</a></code> and so can be specified as a function
object, a string naming a function, etc.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>An optional <code><a href='https://www.rdocumentation.org/packages/base/topics/Random'>seed</a></code> to use.</p></td>
    </tr>
    <tr>
      <th>offset</th>
      <td><p>A vector of offsets. Only required if <code>newsubjdata</code> is
specified and an <code>offset</code> argument was specified when fitting the
model.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>optional arguments to pass to pp_args</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>draws</code> by <code><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow(newdata)</a></code> matrix of simulations from the
  posterior predictive distribution. Each row of the matrix is a vector of 
  predictions generated using a single draw of the model parameters from the 
  posterior distribution. The returned matrix will also have class
  <code>"ppd"</code> to indicate it contains draws from the posterior predictive
  distribution.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>For binomial models with a number of trials greater than one (i.e., not
  Bernoulli models), if <code>newsubjdata</code> is specified then it must include all
  variables needed for computing the number of binomial trials to use for the
  predictions. For example if the left-hand side of the model formula is
  <code><a href='https://www.rdocumentation.org/packages/base/topics/cbind'>cbind(successes, failures)</a></code> then both <code>successes</code> and
  <code>failures</code> must be in <code>newdata</code>. The particular values of
  <code>successes</code> and <code>failures</code> in <code>newdata</code> do not matter so
  long as their sum is the desired number of trials. If the left-hand side of
  the model formula were <code><a href='https://www.rdocumentation.org/packages/base/topics/cbind'>cbind(successes, trials - successes)</a></code> then
  both <code>trials</code> and <code>successes</code> would need to be in <code>newsubjdata</code>,
  probably with <code>successes</code> set to <code>0</code> and <code>trials</code> specifying
  the number of trials.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Examples of posterior predictive checking can also be found in the
  <span class="pkg">rstanarm</span> vignettes and demos.</p>
<p><code><a href='predictive_error.html'>predictive_error</a></code> and <code><a href='predictive_interval.stapreg.html'>predictive_interval</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (!<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/exists'>exists</a></span>(<span class='st'>"example_model"</span>)) <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/example'>example</a></span>(<span class='no'>example_model</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: no help found for ‘example_model’</span></div><div class='input'><span class='no'>yrep</span> <span class='kw'>&lt;-</span> <span class='fu'>posterior_predict</span>(<span class='no'>example_model</span>)</div><div class='output co'>#&gt; <span class='error'>Error in posterior_predict(example_model): object 'example_model' not found</span></div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/table'>table</a></span>(<span class='no'>yrep</span>)</div><div class='output co'>#&gt; <span class='error'>Error in table(yrep): object 'yrep' not found</span></div><div class='input'>
</div><div class='input'><span class='co'># If using new data the all pertinent data must be submitted to the function including subject_ID</span>
<span class='co'># The same distance and time datasets below are used in the original function</span>
<span class='co'># Which will associate the same spatio-temporal exposure to this subject's new fixed covariates.</span>
<span class='no'>newdata</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>subj_ID</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>measure_ID</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>centered_income</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>sex</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>centered_age</span> <span class='kw'>=</span> <span class='fl'>0</span>)
<span class='no'>pps</span> <span class='kw'>&lt;-</span> <span class='fu'>posterior_predict</span>(<span class='no'>example_model</span>, <span class='kw'>newsubjdata</span> <span class='kw'>=</span> <span class='no'>newdata</span>,
                         <span class='kw'>newdistdata</span><span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/subset'>subset</a></span>(<span class='no'>distdata</span>,<span class='no'>subj_ID</span> <span class='kw'>==</span> <span class='fl'>1</span>, <span class='no'>measure_ID</span> <span class='kw'>==</span> <span class='fl'>1</span>),
                         <span class='kw'>newtimedata</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/subset'>subset</a></span>(<span class='no'>timedata</span>, <span class='no'>subj_ID</span> <span class='kw'>==</span> <span class='fl'>1</span>, <span class='no'>measure_ID</span> <span class='kw'>==</span> <span class='fl'>1</span>),
                         <span class='kw'>subject_ID</span> <span class='kw'>=</span> <span class='st'>"subj_ID"</span>, <span class='kw'>group_ID</span> <span class='kw'>=</span> <span class='st'>"measure_ID"</span> )</div><div class='output co'>#&gt; <span class='error'>Error in posterior_predict(example_model, newsubjdata = newdata, newdistdata = subset(distdata,     subj_ID == 1, measure_ID == 1), newtimedata = subset(timedata,     subj_ID == 1, measure_ID == 1), subject_ID = "subj_ID", group_ID = "measure_ID"): object 'example_model' not found</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Adam Peterson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

